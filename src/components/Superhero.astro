---
import HeroCard from './HeroCard.astro';
import { useTranslations } from '../i18n/utils.js';

interface Props {
  lang?: string;
}

const { lang = 'en' } = Astro.props;
const t = useTranslations(lang);
const roles = t('superhero.roles');

// If roles doesn't exist in translation (e.g., ru.json hasn't defined it yet),
// fall back to English
import en from '../i18n/en.json';
const heroesData = Array.isArray(roles) ? roles : en.superhero.roles;

const fallbackImage = "https://images.pexels.com/photos/1105379/pexels-photo-1105379.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2";
const cardClassName = "h-auto sm:h-[300px] lg:h-[500px]";
---

<div id="superhero" class="bg-surface-base py-20 md:py-32">
  <div class="max-w-6xl mx-auto px-6 md:px-12">
    <!-- Section header -->
    <div class="mb-16 fade-in-section">
      <span class="text-xs font-semibold tracking-widest uppercase text-brand-accent">{lang === 'ru' ? 'Портфолио' : 'Portfolio'}</span>
      <h2 class="text-3xl md:text-4xl font-bold text-white mt-2 tracking-tight">{lang === 'ru' ? 'Чем я занимаюсь' : 'What I Do'}</h2>
      <div class="w-16 h-1 bg-gradient-to-r from-brand-light to-brand-accent rounded-full mt-4"></div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="fade-in-section">
        <HeroCard heroData={heroesData[0]} fallbackImage={fallbackImage} className={cardClassName} />
      </div>
      <div class="fade-in-section">
        <HeroCard heroData={heroesData[1]} fallbackImage={fallbackImage} className={cardClassName} />
      </div>
      <div class="md:col-span-2 fade-in-section">
        <HeroCard heroData={heroesData[3]} fallbackImage={fallbackImage} className={cardClassName} />
      </div>
      <div class="fade-in-section">
        <HeroCard heroData={heroesData[2]} fallbackImage={fallbackImage} className={cardClassName} />
      </div>
      <div class="fade-in-section">
        <HeroCard heroData={heroesData[4]} fallbackImage={fallbackImage} className={cardClassName} />
      </div>
      <div class="md:col-span-2 fade-in-section">
        <HeroCard heroData={heroesData[5]} fallbackImage={fallbackImage} className={cardClassName} />
      </div>
    </div>
  </div>
</div>
