# CLAUDE.md — roganov.me

## Project Overview

Personal portfolio and website for Ivan Roganov. Astro static site with React islands, hosted on AWS S3.

## Tech Stack

- Astro 5.x — static site generator
- @astrojs/react — React component integration (islands architecture)
- Tailwind CSS 3 (utility-first, via @astrojs/tailwind)
- @tailwindcss/typography — prose styling for blog posts
- Framer Motion — animations (React islands only)
- React 18 — interactive components only (Contact, Banner, Birthday pages, mobile nav)

## Commands

- `npm run dev` — Start Astro dev server
- `npm run build` — Production build to `./dist`
- `npm run preview` — Preview production build locally
- `npm run lint` — ESLint
- `bash deploy.sh` — Build + deploy to S3 bucket `s3://roganov.me`

## Project Structure

```
src/
  content.config.ts         # Content collections definition (blog)
  config/profile.js         # Centralized profile data (name, links, SEO, contact)
  i18n/
    en.json, ru.json        # Translation strings
    utils.js                # getLangFromUrl, useTranslations, getLocalePath, getAlternateLang
  data/blog/                # Blog content (Markdown with frontmatter)
    qualiflation/en.md      # Blog posts organized by slug/lang.md
  layouts/
    BaseLayout.astro        # HTML shell, <head>, GA, SEO, hash redirect
    PageLayout.astro        # BaseLayout + NavBar + Footer wrapper
    BlogPostLayout.astro    # Blog post wrapper with prose styling
  pages/                    # File-based routing
    index.astro             # Homepage (EN)
    birthday-2025.astro     # Birthday 2025 (EN)
    birthday-2026.astro     # Birthday 2026 (EN)
    blog/index.astro        # Blog listing (EN)
    blog/[slug].astro       # Blog post (EN)
    ru/                     # Russian locale prefix
      index.astro           # Homepage (RU)
      birthday-2025.astro, birthday-2026.astro
      blog/index.astro, blog/[slug].astro
  components/
    NavBar.astro            # Static navbar (desktop links)
    NavBarMobile.jsx        # React island — mobile hamburger menu
    Footer.astro            # Static footer
    Hero.astro              # Static hero section
    About.astro             # Static about section
    Superhero.astro         # Static portfolio card grid
    HeroCard.astro          # Static card component
    Banner.jsx              # React island — framer-motion scrolling banner
    contact/Contact.jsx     # React island — QR code, vCard, contact info
    Birthday.jsx            # React island — 2025 birthday page
    Birthday2026.jsx        # React island — 2026 birthday page
  utils/
    calendarUtils.js        # Calendar event generation (Google Cal / iCal)
    contactUtils.js         # vCard and contact URL generation
  styles/global.css         # Tailwind entry point
  assets/Hero.jpeg          # Hero background image (processed by Astro)
public/
  img/                      # Static images (hero0-4.png)
  ivan.png, park-2025.png, park-2026.jpg, robots.txt
```

## Routing

File-based routing with i18n:
- `/` — English homepage
- `/ru/` — Russian homepage
- `/blog/` — English blog listing
- `/blog/qualiflation/` — English blog post
- `/ru/blog/` — Russian blog listing
- `/birthday-2025/`, `/birthday-2026/` — Birthday events (EN)
- `/ru/birthday-2025/`, `/ru/birthday-2026/` — Birthday events (RU)

Hash route backwards compatibility: old `/#/path` URLs redirect to `/path/` via inline script in BaseLayout.

## i18n

- English is default (no prefix), Russian uses `/ru/` prefix
- Translation strings in `src/i18n/en.json` and `ru.json`
- `useTranslations(lang)` returns a `t('key.path')` function
- `getLocalePath(lang, path)` generates locale-prefixed URLs
- Astro config has `fallback: { ru: 'en' }` — missing RU pages fall back to EN

## Blog

- Content collections defined in `src/content.config.ts`
- Posts live in `src/data/blog/<slug>/<lang>.md` with frontmatter
- Required frontmatter: `title`, `slug`, `date`, `description`, `lang`
- Optional: `tags`, `draft`
- Blog post pages use `@tailwindcss/typography` prose classes

## Key Patterns

- All site-wide data lives in `src/config/profile.js` — edit there first for name/contact/SEO changes
- Static components are `.astro` files (zero JS shipped)
- Interactive components are `.jsx` React islands with `client:visible` or `client:load` directives
- Styling is Tailwind utility classes; custom extensions in `tailwind.config.js` (blink animation, glow, custom colors)
- SEO handled natively in BaseLayout.astro `<head>` — no React Helmet
- Google Analytics via inline script in BaseLayout.astro (ID: G-3WR8FYRV2N)
- Sitemap auto-generated by @astrojs/sitemap

## Conventions

- No TypeScript for components — plain JSX for React, .astro for static
- Component files use PascalCase
- React islands must use `export default function` (not named exports)
- Astro pages pass `lang` prop to components for i18n
